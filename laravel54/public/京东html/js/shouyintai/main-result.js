/* @update: 2017-8-3 17:58:58 */ 
seajs.config({comboExcludes:/.*/,paths:{project:"//sp.jd.com/payment/2.0.0",unit:"//sp.jd.com/payment/2.0.0/js/unit"}});var fetchJSONP=function(t,a,o){$.ajax({url:t,data:a,dataType:"jsonp",success:function(t){"undefined"!=typeof t&&o(t)}})};!function(){fetchJSONP("//ms.jr.jd.com/licaibase/getWCPayOfficialAccStatus","appidFlag=4",function(t){var a=$(".prb-promotion-item-wrap"),o=function(t){fetchJSONP("//jrdx.jd.com/dh/display","mid="+t+"&count=1",function(t){if(1===t.code&&"undefined"!=typeof t.data){var o=-1!==t.data[0].imageUrl.indexOf("http:")?t.data[0].imageUrl.split("http:")[1]:t.data[0].imageUrl;a.css("background-image","url("+o+")"),paymentRecommend.sendLog(t.data[0].logUrl)}})};t.resultData?fetchJSONP("//pa.jd.com/quickPay/getState","",function(t){1==t.state?o("95"):o("111")}):o("96")})}(),avalon.config({debug:!1}),avalon.component("ms-result-promotion",{template:['<div class="porm-box" :if="@data.promotion1">','    <div class="porm-box-first clearfix">','        <div class="pbf-left">','            <div class="pbf-left-wrap pbf-left-enter">','                <a target="_blank" :attr="{href: @data.promotion1.redirectURL, psa: @data.promotion1.psa1}" >','                    <img :attr="{src: @data.promotion1.imageURL}">',"                </a>","            </div>",'            <div class="pbf-left-bg"></div>','            <div class="pbf-left-content">','                <span class="pbf-left-content-1">{{@data.promotion1.promotionInfo1}}</span>','                <span class="pbf-left-content-2">{{@data.promotion1.promotionInfo2}}</span>','                <div class="pbf-left-content-operate">','                    <a class="pbf-left-content-button" :attr="{href: @data.promotion1.redirectURL, psa: @data.promotion1.psa1}" target="_blank">{{@data.promotion1.buttonText}}</a>',"                </div>","            </div>","        </div>","        <div class=\"pbf-right\" :css=\"{background: 'url('+ @data.promotionList2[0].imageUrl + ') no-repeat'}\">",'            <a class="pbf-right-1" :attr="{href: @data.promotionList2[0].toUrl}" target="_blank"></a>',"            <!--ms-for: ($index, item) in @data.promotionList3-->",'            <a :attr="{class: \'pbf-right-list pbf-right-\'+ ($index+2), href: @item.toUrl}" target="_blank"><img :attr="{src: @item.imageUrl}"></a>',"            <!--ms-for-end:-->","        </div>",'        <div class="pbf-market">','            <div class="pbf-market-side">','                <a :attr="{href: @data.promotionList4[0].toUrl}" target="_blank">','                    <img width="474" height="334" :attr="{src: @data.promotionList4[0].imageUrl}">',"                </a>","            </div>",'            <ul class="pbf-market-list">',"               <!--ms-for: ($index, item) in @data.promotionList5-->","                <li :attr=\"{class: 'pbf-market-list-item-'+ ($index+1)}\">",'                    <a :attr="{href: @item.toUrl}" target="_blank">','                        <img width="286" height="167" :attr="{src: @item.imageUrl}">',"                    </a>","                </li>","               <!--ms-for-end:-->","            </ul>","        </div>","    </div>","</div>"].join(""),defaults:{data:{},onReady:function(){}}}),avalon.ready(function(){var t=avalon.define({$id:"vmResultPromotionArea",data:{}});fetchJSONP("//pa.jd.com/payment/queryPromotionGroup.action","orderId="+successVar.orderId,function(a){var o={promotion1:null,promotionList2:[],promotionList3:[],promotionList4:[],promotionList5:[]};o.promotion1=a.promotion1,fetchJSONP("//jrdx.jd.com/dh/batchdisplay","mids=88,89,90,91,92,93,97,98,99,100,101&counts=1,1,1,1,1,1,1,1,1,1,1",function(a){for(var i in a.data){var e=a.data[i].mediaId,r=a.data[i].dataList[0];switch(e){case 88:o.promotionList2.push(r);break;case 89:o.promotionList3.push(r);break;case 90:o.promotionList3.push(r);break;case 91:o.promotionList3.push(r);break;case 92:o.promotionList3.push(r);break;case 93:o.promotionList3.push(r);break;case 97:o.promotionList4.push(r);break;case 98:o.promotionList5.push(r);break;case 99:o.promotionList5.push(r);break;case 100:o.promotionList5.push(r);break;case 101:o.promotionList5.push(r)}paymentRecommend.sendLog(r.logUrl)}t.data=o,$("#result-promotion").html("<xmp ms-widget=\"{is:'ms-result-promotion', $id:'vmResultPromotion', data:@data}\"></xmp>"),avalon.scan(document.getElementById("result-promotion"))})})});